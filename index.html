<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Pay</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://web.squarecdn.com/v1/square.js"></script> <!-- Production URL -->
</head>
<body>
    <header>
        <h1>Welcome to Final Pay</h1>
        <a target="_blank" href="https://www.imghost.net/YfxupcFdWUez0Va">
            <img src="https://www.imghost.net/ib/nIz8KIBWiCsVElP_1727801092.png" alt="Final Frontier Logo" style="max-height: 1in; max-width: 2in;"/>
        </a>
    </header>
    <main>
        <form id="payment-form">
            <div>
                <label for="name">Name:</label>
                <input type="text" id="name" placeholder="John Doe" required>
            </div>
            <div>
                <label for="card-number">Card Number:</label>
                <div id="card-number-container"></div>
            </div>
            <div>
                <label for="cvv">CVV:</label>
                <div id="cvv-container"></div>
            </div>
            <div>
                <label for="expiration-date">Expiration Date:</label>
                <div id="expiration-date-container"></div>
            </div>
            <button type="submit">Pay</button>
        </form>
    </main>

    <script>
        const paymentForm = new SqPaymentForm({
            applicationId: 'sq0idp-DreuQJYtaeQ9RWuMyVxLXw',  // Replace with your production application ID
            locationId: 'LEYMZHA02ZJ74',          // Replace with your production location ID
            inputClass: 'sq-input',
            autoBuild: false, // Ensure this is false for manual setup
            // Define the input fields
            cardNumber: {
                elementId: 'card-number-container',
                placeholder: 'Card Number',
                required: true,
            },
            cvv: {
                elementId: 'cvv-container',
                placeholder: 'CVV',
                required: true,
            },
            expirationDate: {
                elementId: 'expiration-date-container',
                placeholder: 'MM/YY',
                required: true,
            },
            // Handle errors
            callbacks: {
                onError: function (error) {
                    console.error(error);
                    alert(error.message);
                }
            }
        });

        document.getElementById('payment-form').addEventListener('submit', (event) => {
            event.preventDefault();
            paymentForm.requestCardNonce(); // Create a nonce to process payment
        });
    </script>
</body>
</html>
